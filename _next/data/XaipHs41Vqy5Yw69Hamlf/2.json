{"pageProps":{"post":{"title":"next(ts) 로 gh-pages 에 blog 하기(1)","content":"<h3>1. next 를 사용하는 이유?</h3>\n<p>react 는 강력한 기능을 가지고 있지만 그것을 다 사용하기에는 숙련된 경험이 필요합니다.</p>\n<p>저는 백엔드 개발자이며 2015년 0.14x 버전의 리엑트를 사용한 경험이 전부입니다.<br>\n그 후에는 vue 를 1년여정도를 사용했지만 이때도 vue framework 인 nuxt 를 자주 사용했습니다.<br>\n라우터나 미들웨어 plugin 을 적용하는 방식이 손쉽게 다가왔습니다.<br>\n흡사 초기 2.5버전의 스프링을 설정할때 xml 지옥을 맛보다가<br>\n스프링부트가 나오고 통상적인 관례를 따지는 설정방식과 유사하다는 느낌을 받았습니다.</p>\n<p>회사의 ui 라이브러리가 react 로 정해진점과<br>\ngatsby 같은 다른 프레임워크보다는 next 가 회사 업무의 연장으로 더 활용할수 있다 판단하였습니다.<br>\n그리고 마지막으로 제일 중요한 이유는 그냥 하고 싶었기 때문입니다.</p>\n<h3>2. next 시작하기</h3>\n<p>nuxt 는 버전이 좀 다르긴 해도 한글문서가 좀 잘 되어있고 설치시 cli 로 많은 starter 를 고르 수 있었는데<br>\n제가 못찾은건지 next 는 영문문서만 있고 cli 가 단순히 설치만 가능했습니다.</p>\n<p>코드를 생성할 폴더로 가셔서 아래의 명령어를 수행해주세요.</p>\n<blockquote>\n<p>2021-01-01 기준 node 10.13 이상 버젼이 설치되어있어야합니다.</p>\n</blockquote>\n<pre><code class=\"language-shell\">npx create-next-app next-blog\n</code></pre>\n<p>(1) <code>npx create-next-app next-blog</code> 이 명령어를 수행하면 next-blog 라는 이름으로 next 프로젝트를 만들어줍니다.<br>\n1회성 작업이기 때문에 npx 로 수행했습니다.</p>\n<blockquote>\n<p>npx 의 설명은 https://geonlee.tistory.com/32 해당 블로그에 잘 나와있으니 링크로 대신하겠습니다.<br>\nnextjs-blog 라는 폴더로 프로젝트가 생성이 됩니다. 원하시는 이름으로 생성하셔도 됩니다.</p>\n</blockquote>\n<p>설치가 되고나면 아래와 같이 명령어를 수행해보라고 나옵니다.</p>\n<p><img src=\"/assets/2/img.png\" alt=\"img.png\"></p>\n<blockquote>\n<p>yarn dev 는 npm run dev 와 같은 역할을 합니다.<br>\nyarn 은 npm 에 비해 몇가지 장점이 있는데요.\n이부분은 검색하면 다양한 내용들이 있으니 찾아보길 권합니다.</p>\n</blockquote>\n<pre><code class=\"language-shell\">cd next-blog\nyarn dev\n</code></pre>\n<p>(1) next-blog 프로젝트 폴더로 이동합니다.<br>\n(2) yarn dev 를 수행합니다.<br>\nyarn dev 는 npm run dev 와 동일합니다.<br>\npackage.json 의 script 에서 dev 에 적혀있는것을 수행하는 명령어입니다.<br>\n내부동작은 추후 next 시리즈를 연재할때 설명드리겠습니다.</p>\n<p>명령어를 수행하고 나면 아래와 같은 결과가 나옵니다.</p>\n<p><img src=\"/assets/2/img_2.png\" alt=\"img_2.png\"></p>\n<p>웹 브라우저에서 http://localhost:3000 을 수행해보세요.</p>\n<p>그러면 아래와 같은 화면이 나올겁니다.</p>\n<p><img src=\"/assets/2/img_1.png\" alt=\"img_1.png\"></p>\n<h3>3. pages 설명</h3>\n<p>cli 명령을 작성하고 나면 아래와 같은 형태로 파일이 구성됩니다.</p>\n<pre><code>./pages/\nㄴ ./api/\n  ㄴ hello.js\nㄴ _app.js\nㄴ index.js\n./public/\nㄴ favicon.ico\nㄴ vercel.svg\n./styles/\nㄴ Home.module.css\nㄴ global.css\n.gitignore\nREADME.md\npackage.json\nyarn.lock\n</code></pre>\n<p>pages 폴더는 기본셋팅시 router 기능을 합니다.<br>\n./pages/api/hello.js 는 /api/hello 주소가 생기게 됩니다.</p>\n<p>그래서 위의 최초 구성시<br>\nurl 은 /api/hello 와 / 두개가 됩니다.</p>\n<blockquote>\n<p>만약 ./pages/hello.js ./pages/hello/index.js 두개를 동시에 작성한다면<br>\nhello.js 로 라우팅이 되겠지만<br>\n<code>warn - Duplicate page detected. pages/hello.js and pages/hello/index.js both resolve to /hello.</code> 라는 로그가 발생합니다.</p>\n</blockquote>\n<p>pages 폴더 밑에서 라우터기능을 하는건 참 매력적입니다.<br>\n별도의 라우터 설정을 안해도 되며 직관적이기 때문입니다.</p>\n<p>그러면 블로그를 작성한다면 매번 이렇게 페이지를 생성해야할까요?<br>\n아닙니다. 우리는 마크다운파일을 생성해서 해당 파일의 이름(전 숫자로 할 예정)으로 동적 생성하게 작성할 예정입니다.<br>\n이건 다음 편에서 더 얘기를 드리겠습니다.</p>\n<p>pages 에 _app.js 라는 파일이 궁금하실텐데 pages에 _ 로 시작되는 파일은 라우팅 대상이 아닙니다.<br>\n해당 파일은 nuxt 의 미들웨어와 비슷한 작업을 하게 됩니다. 이것도 다음에 어떻게 활용하는지 설명드리겠습니다.</p>\n<h3>4. ts 얹기</h3>\n<p>굳이 타입스크립트를 적용할 필요가 있을까? 궁금해 하실수 있는데요.<br>\n사실 블로그만 만드는데는 불필요합니다.<br>\n대신 저는 해당 블로그를 만들때 제 업무의 확장으로 보고 있어서<br>\n실제 업무로는 타입스크립트도 적용할거라 요것도 타입스크립트를 적용하려 합니다.</p>\n<p>위에 뜬금없이 pages 설명한 이유는 불필요한 파일들을 삭제하기전에 왜 삭제해도 되는지 알려드리려는 떡밥이였습니다.</p>\n<p>아까 말한 <code>/api/hello</code> 의 url 은 사용안할거니 아래의 두 파일을 삭제합니다.<br>\n./pages/api/hello.js<br>\n./pages/api/</p>\n<p>이제 타입스크립트를 설정하기위해 명령어를 수행하겠습니다.</p>\n<pre><code class=\"language-shell\"> touch tsconfig.json\n yarn add --dev typescript @types/react @types/node\n yarn dev\n</code></pre>\n<blockquote>\n<p>touch 는 windows 기본 커맨드창에서는 안될겁니다.<br>\n툴로 파일을 생성해도 됩니다.</p>\n</blockquote>\n<p>(1) <code>touch tsconfig.json</code> 는 빈 내용의 tsconfig.json 파일을 만들어줍니다.<br>\n이름에도 알수 있듯이 json 형태의 typescript 설정파일입니다.</p>\n<p>(2) typescript 를 적용하려면 최소 typescript @types/react @types/node 이렇게 3개의 라이브러리가 필요합니다.<br>\n<code>yarn add --dev typescript @types/react @types/node</code> 를 수행하게 되면<br>\n<code>package.json</code> 파일에 <code>devDependencies</code> 로 3개의 라이브러리가 추가된것을 확인할수 있습니다.</p>\n<p>(3) <code>yarn dev</code> 이렇게 수행하면 아래와 같은 메시지가 나오면서 서버가 시동됩니다.</p>\n<p><img src=\"/assets/2/img_4.png\" alt=\"img_4.png\"></p>\n<p>아까와는 다르게 detected typescript 라고 나오는것을 볼수 있습니다.<br>\n파일 목록을 조회해보면 next-env.d.ts 파일이 새로 생성이 되었습니다.</p>\n<blockquote>\n<p>next-env.d.ts 파일은 <a href=\"https://nextjs.org/docs/basic-features/typescript\">링크</a> 에 가보시면 다음과 같이 써져있습니다.<br>\nA file named next-env.d.ts will be created in the root of your project. This file ensures Next.js types are picked up by the TypeScript compiler. You cannot remove it, however, you can edit it (but you don't need to).</p>\n</blockquote>\n<p>아까 만든 tsconfig.json 파일에 들어가면 내용이 채워져있을겁니다.<br>\ntsconfig.json 에 strict 모드는 기본이 false 입니다.<br>\ntrue로 변경해주세요.</p>\n<p>그리고 typescript를 적용할 파일들을 tsx 로 변경해줍니다.<br>\n./pages/index.js -> ./pages/index.tsx<br>\n./pages/_app.js -> ./pages/_app.tsx<br>\n로 이름을 변경해줍니다.</p>\n<blockquote>\n<p>ts 와 tsx 확장자가 있는데 jsx 문법이 적용되어있으면 tsx 로 변경해주시고 그 외에는 ts로 변경해주시면 됩니다.</p>\n</blockquote>\n<p>파일이름이 변경되었기때문에 <code>yarn dev</code> 로 다시 재시작하고 브라우저를 새로고침 하겠습니다.</p>\n<p>잘 나오시나요?</p>\n<h3>4. 다음시간에는</h3>\n<p>아무것도 없는 페이지뿐이라니 실망하셨을것 같습니다.</p>\n<p>다음에는 마크다운 파일로 글을 쓰면<br>\n글 목록이 나오고 볼수 있는 기능까지 진행하겠습니다.</p>\n<blockquote>\n<p>디자인이 별로인건 제가 미적감각이 없어서 추후에 진행하려합니다...</p>\n</blockquote>\n"}},"__N_SSG":true}